
# hexago-api-chi

hexago-api-chi - Built with Hexagonal Architecture

Generated by [HexaGo](https://github.com/padiazg/hexago) - A hexagonal architecture scaffolding CLI tool.

## Overview

This project follows the **Hexagonal Architecture** (also known as Ports & Adapters) pattern, which promotes:
- Clear separation of concerns
- Framework independence in the core domain
- Testability through dependency inversion
- Maintainability and flexibility

## Project Structure

```
hexago-api-chi/
├── cmd/                          # Application commands (Cobra CLI)
│   ├── root.go                  # Root command and configuration
│   └── run.go                   # Server startup with graceful shutdown
├── internal/
│   ├── core/                    # CORE - Business logic (no external dependencies)
│   │   ├── domain/              # Domain entities and value objects
│   │   └── services/      # Application business logic
│   ├── adapters/                # ADAPTERS - External interfaces
│   │   ├── primary/    # Inbound adapters (HTTP, gRPC, CLI)
│   │   └── secondary/   # Outbound adapters (database, external APIs)
│   └── config/                  # Configuration management
├── pkg/                         # Public reusable packages
│   └── logger/                  # Logger implementation
├── main.go                      # Application entry point
├── Makefile                     # Common development tasks
└── README.md                    # This file
```

## Architecture Principles

### Dependency Rule
Dependencies flow inward:
```
Adapters → Core (services) → Domain
```

- **Core Domain** never depends on adapters or infrastructure
- **Services** orchestrate domain logic and define interfaces (ports)
- **Adapters** implement the interfaces defined by the core

### Layers

1. **Domain** (`internal/core/domain/`)
   - Pure business entities
   - Value objects
   - Domain logic
   - No external dependencies

2. **Services** (`internal/core/services/`)
   - Application business logic
   - Orchestrates domain objects
   - Defines port interfaces
   - Framework-agnostic

3. **Adapters** (`internal/adapters/`)
   - **Primary**: Handle incoming requests (HTTP handlers, gRPC, CLI)
   - **Secondary**: Handle outgoing calls (databases, external APIs)

4. **Infrastructure** (`internal/config/`, `pkg/`)
   - Cross-cutting concerns
   - Configuration
   - Logging
   - Utilities

## Getting Started

### Prerequisites

- Go 1.21+ installed
- Make (optional, for convenience commands)

### Installation

```bash
# Install dependencies
go mod download

# Build the application
make build
# or
go build -o hexago-api-chi main.go
```

### Running

```bash
# Run directly
./hexago-api-chi run

# Or using go run
go run main.go run

# Or using make
make run
```

The server will start on port 8080 (configurable via config file or environment variables).

### Configuration

Create a `.hexago-api-chi.yaml` file in the project root:

```yaml
server:
  port: 8080
  host: 0.0.0.0
  readtimeout: 15s
  writetimeout: 15s
  idletimeout: 60s
  shutdowntimeout: 30s

loglevel: info
logformat: json
```

Or use environment variables with `HEXAGO-API-CHI_` prefix:

```bash
export HEXAGO-API-CHI_SERVER_PORT=8080
export HEXAGO-API-CHI_LOGLEVEL=debug
```

## Development

### Available Commands

```bash
make help          # Show all available commands
make build         # Build the application
make run           # Run the application
make test          # Run tests
make test-coverage # Run tests with coverage report
make clean         # Clean build artifacts
make fmt           # Format code
make lint          # Run linter
```

### Testing

```bash
# Run all tests
go test ./...

# Run tests with coverage
go test -v -race -coverprofile=coverage.out ./...

# View coverage report
go tool cover -html=coverage.out
```



## API Endpoints

- `GET /health` - Health check endpoint

## Adding New Features

When adding new features, follow the hexagonal architecture:

1. **Add domain entities** in `internal/core/domain/`
2. **Add business logic** in `internal/core/services/`
3. **Add adapters** as needed:
   - HTTP handlers in `internal/adapters/primary/http/`
   - Database repositories in `internal/adapters/secondary/database/`

## Learn More

- [Hexagonal Architecture](https://alistair.cockburn.us/hexagonal-architecture/)
- [Ports & Adapters Pattern](https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/)
- [Clean Architecture](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)

## License

[Your License Here]

## Generated by HexaGo

This project was scaffolded using HexaGo, an opinionated CLI tool for generating hexagonal architecture projects.

Learn more: https://github.com/padiazg/hexago
